<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X.N.O.R News & Updates</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="../styles.css">
    <style>
        .loading {
            text-align: center;
            padding: 50px 20px;
            font-size: 18px;
            color: var(--text-secondary, #999);
        }
    </style>
</head>
<body>

    <header class="top-bar">
        <span class="app-title">XNOR Cloud</span>
        <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="search-input" placeholder="Search item...">
        </div>
        <button id="menu-btn" aria-label="Open Menu">
            <i class="fas fa-ellipsis-v"></i>
        </button>
    </header>

    <!-- MENU OVERLAY (unchanged) -->
    <div id="menu-overlay" class="menu-overlay">
        <div class="menu-content">
            <button id="close-menu" aria-label="Close Menu"><i class="fas fa-times"></i></button>
            <h2>Settings</h2>
            <div class="theme-switch-container">
                <span>Dark/Light Theme:</span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
            </div>
            <hr><br>
            <h3>Download for:</h3>
            <div class="platform-buttons">
                <a href="../android.html" class="platform-btn"><i class="fab fa-android"></i> Android</a>
                <a href="../apple.html" class="platform-btn"><i class="fab fa-apple"></i> Apple</a>
                <a href="../windows.html" class="platform-btn"><i class="fab fa-windows"></i> Windows</a>
                <a href="../mac.html" class="platform-btn"><i class="fab fa-apple"></i> Mac</a>
            </div>
            <hr><br>
            <h3>About</h3>
            <div class="platform-buttons">
                <a href="../about.html" class="platform-btn"><i class="fas fa-info-circle"></i> About Us</a>
                <a href="fix.html" class="platform-btn"><i class="fas fa-tools"></i> Fix Issues</a>
            </div>
        </div>
    </div>

    <main class="news-container">
        <div class="loading">Loading latest news via GNews API...</div>
    </main>

    <nav class="bottom-nav">
        <a href="../index.html" class="nav-btn"><i class="fas fa-home"></i><span>Home</span></a>
        <a href="../android.html" class="nav-btn"><i class="fab fa-android"></i><span>Android</span></a>
        <a href="../windows.html" class="nav-btn"><i class="fab fa-windows"></i><span>Windows</span></a>
        <a href="news.html" class="nav-btn active"><i class="fas fa-newspaper"></i><span>News</span></a>
    </nav>

    <script src="../main.js"></script>

    <!-- GNEWS API INTEGRATION (Best quality in 2025) -->
    <script>
        // ←←← PUT YOUR FREE GNEWS.IO TOKEN HERE ←←←
        const GNEWS_TOKEN = 'a6d838a1aa143927f27b0821cc5273f9';

        const QUERY = 'android OR pixel OR "wear os" OR foldable OR winlator OR gemini OR "windows on android" OR "mobile ai" OR "google ai"';

        fetch(`https://gnews.io/api/v4/search?q=${encodeURIComponent(QUERY)}&lang=en&country=any&max=30&apikey=${GNEWS_TOKEN}`)
            .then(r => r.json())
            .then(data => {
                if (!data.articles || data.articles.length === 0) throw new Error('No articles found');

                const container = document.querySelector('.news-container');
                container.innerHTML = '';

                data.articles.forEach(a => {
                    // Format date exactly like Daganna style: 21-11-2025, 16:00
                    const pubDate = new Date(a.publishedAt);
                    const dateStr = pubDate.toLocaleDateString('en-GB', { day: '2-digit', month: '2-digit', year: 'numeric' }).split('/').join('-');
                    const timeStr = pubDate.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' });

                    // Clean description (180 chars max)
                    const desc = (a.description || '').replace(/<[^>]*>/g, '').substring(0, 180) + (a.description.length > 180 ? '...' : '');

                    // Search keywords
                    const searchText = `${a.title} ${desc} ${a.source.name}`.toLowerCase();

                    // Image (GNews always provides great ones)
                    const img = a.image || 'https://via.placeholder.com/600x400/111/fff?text=News';

                    const card = `
                        <article class="news-card-photo" data-search="${searchText}">
                            <div style="position:relative;">
                                <img src="${img}" alt="${a.title}" class="news-thumb-img"
                                     onerror="this.src='https://via.placeholder.com/600x400/111/fff?text=No+Image'">
                                <div class="news-thumb-overlay">${dateStr}, ${timeStr}</div>
                            </div>
                            <div class="news-card-content">
                                <h3>${a.title}</h3>
                                <p>${desc || 'Tap to read more...'}</p>
                            </div>
                        </article>`;

                    container.innerHTML += card;
                });
            })
            .catch(err => {
                document.querySelector('.news-container').innerHTML = 
                    `<div class="loading">⚠️ GNews error: Check your token or connection<br><br>${err.message}</div>`;
                console.error('GNews fetch error:', err);
            });
    </script>
</body>
</html>